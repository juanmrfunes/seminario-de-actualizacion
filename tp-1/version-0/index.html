<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Gestión de Usuarios</title>
</head>
<body>
    <h1>Gestión de Usuarios y Permisos</h1>

    <h2>Usuarios</h2>
    <form id="userForm">
        <label for="username">Nombre de usuario:</label>
        <input type="text" id="username" name="username" required>
        <label for="password">Contraseña:</label>
        <input type="password" id="password" name="password" required>
        <button type="submit">Añadir Usuario</button>
    </form>

    <form id="deleteUserForm">
        <label for="userId">ID del usuario a eliminar:</label>
        <input type="number" id="userId" name="userId" required>
        <button type="submit">Eliminar Usuario</button>
    </form>

    <form id="updateUserForm">
        <label for="updateUserId">ID del usuario a actualizar:</label>
        <input type="number" id="updateUserId" name="updateUserId" required>
        <label for="updateUsername">Nuevo nombre de usuario:</label>
        <input type="text" id="updateUsername" name="updateUsername" required>
        <label for="updatePassword">Nueva contraseña:</label>
        <input type="password" id="updatePassword" name="updatePassword" required>
        <button type="submit">Actualizar Usuario</button>
    </form>

    <h2>Grupos</h2>
    <form id="groupForm">
        <label for="groupName">Nombre del grupo:</label>
        <input type="text" id="groupName" name="groupName" required>
        <button type="submit">Añadir Grupo</button>
    </form>

    <form id="deleteGroupForm">
        <label for="groupId">ID del grupo a eliminar:</label>
        <input type="number" id="groupId" name="groupId" required>
        <button type="submit">Eliminar Grupo</button>
    </form>

    <form id="updateGroupForm">
        <label for="updateGroupId">ID del grupo a actualizar:</label>
        <input type="number" id="updateGroupId" name="updateGroupId" required>
        <label for="updateGroupName">Nuevo nombre del grupo:</label>
        <input type="text" id="updateGroupName" name="updateGroupName" required>
        <button type="submit">Actualizar Grupo</button>
    </form>

    <h2>Acciones</h2>
    <form id="actionForm">
        <label for="actionName">Nombre de la acción:</label>
        <input type="text" id="actionName" name="actionName" required>
        <button type="submit">Añadir Acción</button>
    </form>

    <form id="deleteActionForm">
        <label for="actionId">ID de la acción a eliminar:</label>
        <input type="number" id="actionId" name="actionId" required>
        <button type="submit">Eliminar Acción</button>
    </form>

    <form id="updateActionForm">
        <label for="updateActionId">ID de la acción a actualizar:</label>
        <input type="number" id="updateActionId" name="updateActionId" required>
        <label for="updateActionName">Nuevo nombre de la acción:</label>
        <input type="text" id="updateActionName" name="updateActionName" required>
        <button type="submit">Actualizar Acción</button>
    </form>

    <h2>Asignar Grupos a Usuarios</h2>
    <form id="userGroupForm">
        <label for="userId">ID del usuario:</label>
        <input type="number" id="userId" name="userId" required>
        <label for="groupId">ID del grupo:</label>
        <input type="number" id="groupId" name="groupId" required>
        <button type="submit">Asignar Grupo</button>
    </form>

    <h2>Asignar Acciones a Grupos</h2>
    <form id="groupActionForm">
        <label for="groupIdAction">ID del grupo:</label>
        <input type="number" id="groupIdAction" name="groupIdAction" required>
        <label for="actionId">ID de la acción:</label>
        <input type="number" id="actionId" name="actionId" required>
        <button type="submit">Asignar Acción</button>
    </form>

    <script>
        document.getElementById('userForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const data = {
                username: document.getElementById('username').value,
                password: document.getElementById('password').value
            };
            fetch('/api/add_user.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => alert(data.message))
            .catch(error => console.error('Error:', error));
        });

        document.getElementById('deleteUserForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const data = {
                userId: document.getElementById('userId').value
            };
            fetch('/api/delete_user.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => alert(data.message))
            .catch(error => console.error('Error:', error));
        });

        document.getElementById('updateUserForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const data = {
                userId: document.getElementById('updateUserId').value,
                username: document.getElementById('updateUsername').value,
                password: document.getElementById('updatePassword').value
            };
            fetch('/api/update_user.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => alert(data.message))
            .catch(error => console.error('Error:', error));
        });

        document.getElementById('groupForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const data = {
                groupName: document.getElementById('groupName').value
            };
            fetch('/api/add_group.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => alert(data.message))
            .catch(error => console.error('Error:', error));
        });

        document.getElementById('deleteGroupForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const data = {
                groupId: document.getElementById('groupId').value
            };
            fetch('/api/delete_group.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => alert(data.message))
            .catch(error => console.error('Error:', error));
        });

        document.getElementById('updateGroupForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const data = {
                groupId: document.getElementById('updateGroupId').value,
                groupName: document.getElementById('updateGroupName').value
            };
            fetch('/api/update_group.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => alert(data.message))
            .catch(error => console.error('Error:', error));
        });

        document.getElementById('actionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const data = {
                actionName: document.getElementById('actionName').value
            };
            fetch('/api/add_action.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => alert(data.message))
            .catch(error => console.error('Error:', error));
        });

        document.getElementById('deleteActionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const data = {
                actionId: document.getElementById('actionId').value
            };
            fetch('/api/delete_action.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => alert(data.message))
            .catch(error => console.error('Error:', error));
        });

        document.getElementById('updateActionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const data = {
                actionId: document.getElementById('updateActionId').value,
                actionName: document.getElementById('updateActionName').value
            };
            fetch('/api/update_action.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => alert(data.message))
            .catch(error => console.error('Error:', error));
        });

        document.getElementById('userGroupForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const data = {
                userId: document.getElementById('userId').value,
                groupId: document.getElementById('groupId').value
            };
            fetch('/api/assign_group_to_user.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => alert(data.message))
            .catch(error => console.error('Error:', error));
        });

        document.getElementById('groupActionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const data = {
                groupIdAction: document.getElementById('groupIdAction').value,
                actionId: document.getElementById('actionId').value
            };
            fetch('/api/assign_action_to_group.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => alert(data.message))
            .catch(error => console.error('Error:', error));
        });
    </script>
</body>
</html>
